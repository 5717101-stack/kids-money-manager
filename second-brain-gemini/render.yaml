services:
  - type: web
    name: second-brain-gemini
    env: python
    buildCommand: |
      pip install --upgrade pip && pip install -r requirements.txt
      # Save last commit message for deployment notification
      git log -1 --pretty=%B > .last_commit 2>/dev/null || echo "No git info available" > .last_commit
    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT
    plan: free
    envVars:
      - key: PORT
        value: 8000
      - key: HOST
        value: 0.0.0.0
      - key: DEBUG
        value: "false"
      - key: RENDER
        value: "true"
      # Add your environment variables in Render dashboard:
      # - GOOGLE_API_KEY
      # - WHATSAPP_CLOUD_API_TOKEN
      # - WHATSAPP_PHONE_NUMBER_ID
      # - WHATSAPP_VERIFY_TOKEN
      # - WHATSAPP_TO
